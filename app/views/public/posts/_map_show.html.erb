<div id="map" style="height: 400px;"></div>

<script>
  let map; // マップ
  let marker; // ピン
  let geocoder; // 住所

  // 初期マップの設定
  function initMap() {
    geocoder = new google.maps.Geocoder();
    map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: <%= @post.latitude %>, lng: <%= @post.longitude %> },
      zoom: 15,
      fullscreenControl: false,
      streetViewControl: false,
      scaleControl: true,
      mapTypeControl: false
    });

    // マーカーの設定
    marker = new google.maps.Marker({
      map: map,
      position: { lat: <%= @post.latitude %>, lng: <%= @post.longitude %> },
      title: '<%= @post.spot_name %>'
    });
  }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY'] %>&callback=initMap"></script>
